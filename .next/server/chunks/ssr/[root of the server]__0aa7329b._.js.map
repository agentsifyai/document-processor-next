{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Users/chriskinsman/Documents/GitHub/agentsifyai/document-processor-next/app/components/uploadFile.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport Image from \"next/image\";\nimport JSZip from \"jszip\";\n\n// Type for our file data that includes the URL\ninterface TempFileData {\n  id: string;\n  file: File;\n  url: string;\n  isExtracted?: boolean;\n  parent?: string; // To track nested files\n}\n\n// Type for tracking zip extraction progress\ninterface ExtractionProgress {\n  processing: boolean;\n  message: string;\n}\n\n// Component to display a file in the tree\ninterface FileTreeItemProps {\n  fileData: TempFileData;\n  allFiles: TempFileData[];\n  onRemove: () => void;\n  isProcessing: boolean;\n  removeFile: (index: number) => void;\n  level: number;\n}\n\nfunction FileTreeItem({\n  fileData,\n  allFiles,\n  onRemove,\n  isProcessing,\n  removeFile,\n  level,\n}: FileTreeItemProps) {\n  const [expanded, setExpanded] = useState(true);\n  const isZip = fileData.file.name.toLowerCase().endsWith(\".zip\");\n  const isFolder = fileData.file.type === 'folder' || fileData.file.name.endsWith('/');\n  \n  // Get immediate children - files that have this item as their direct parent\n  const childFiles = allFiles.filter((f) => f.parent === fileData.file.name || \n    // Also include files where this folder is their direct parent (with full path)\n    (f.parent && f.parent === `${fileData.parent}/${fileData.file.name}`));\n  \n  // Check if we have children\n  const hasChildren = childFiles.length > 0;\n\n  return (\n    <div>\n      <div className={`p-3 flex items-center ${level > 0 ? \"bg-gray-50\" : \"\"}`}>\n        {/* Indentation with vertical lines for better visual hierarchy */}\n        {level > 0 && (\n          <div className=\"flex-shrink-0 flex\">\n            {Array.from({ length: level }).map((_, i) => (\n              <div \n                key={i} \n                className=\"w-4 flex justify-center relative\"\n              >\n                <div className=\"border-l border-gray-300 h-full absolute top-0 bottom-0\"></div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Branch line to the current item */}\n        {level > 0 && (\n          <div className=\"w-3 h-0.5 bg-gray-300 flex-shrink-0 -ml-1.5\"></div>\n        )}\n\n        {/* Expand/collapse button for folders or zip files with content */}\n        {hasChildren && (\n          <button\n            onClick={() => setExpanded(!expanded)}\n            className=\"mr-1 text-gray-500 w-6 h-6 flex items-center justify-center\"\n            aria-label={expanded ? \"Collapse\" : \"Expand\"}\n            disabled={isProcessing}\n          >\n            {expanded ? \"▼\" : \"►\"}\n          </button>\n        )}\n\n        {/* Spacer if no expand button */}\n        {!hasChildren && <div className=\"w-6\"></div>}\n\n        {/* File icon - different for folders and zips */}\n        <Image\n          src={isFolder ? \"/file.svg\" : isZip ? \"/file.svg\" : \"/file.svg\"} \n          alt={isFolder ? \"Folder\" : isZip ? \"Zip Archive\" : \"Document\"}\n          width={isFolder || isZip ? 18 : 16}\n          height={isFolder || isZip ? 18 : 16}\n          className=\"mr-2\"\n        />\n\n        {/* File name */}\n        <span className={`text-sm ${isZip || isFolder ? \"font-medium\" : \"\"} ${isFolder ? \"text-blue-700\" : \"\"}`}>\n          {fileData.file.name}{isFolder && !fileData.file.name.endsWith('/') ? '/' : ''}\n        </span>\n\n        {/* File size - only for real files */}\n        {fileData.file.size > 0 && (\n          <span className=\"text-xs text-gray-500 ml-2\">\n            {(fileData.file.size / 1024).toFixed(0)} KB\n          </span>\n        )}\n        \n        {/* Show indicator for folders */}\n        {isFolder && (\n          <span className=\"text-xs text-gray-500 ml-2\">\n            Folder\n          </span>\n        )}\n\n        {/* Remove button */}\n        <button\n          onClick={onRemove}\n          className=\"ml-auto text-sm text-gray-500 hover:text-red-600\"\n          aria-label=\"Remove file\"\n          disabled={isProcessing}\n        >\n          ✕\n        </button>\n      </div>\n\n      {/* Show child files when expanded */}\n      {expanded && hasChildren && (\n        <div className=\"border-t border-gray-100\">\n          {/* Render all child items recursively */}\n          {childFiles.map((childFile, childIndex) => {\n            const index = allFiles.findIndex(\n              (f) => f.id === childFile.id\n            );\n            \n            // For folders and nested elements, render recursively\n            if (childFile.file.type === 'folder' || childFile.file.name.endsWith('/')) {\n              return (\n                <FileTreeItem\n                  key={`child-folder-${childIndex}`}\n                  fileData={childFile}\n                  allFiles={allFiles}\n                  onRemove={() => removeFile(index)}\n                  isProcessing={isProcessing}\n                  removeFile={removeFile}\n                  level={level + 1}\n                />\n              );\n            }\n            \n            // For regular files\n            return (\n              <div\n                key={`child-${childIndex}`}\n                className=\"py-1 px-3 flex items-center\"\n              >\n                {/* Indentation with vertical lines */}\n                <div className=\"flex-shrink-0 flex\">\n                  {Array.from({ length: level + 1 }).map((_, i) => (\n                    <div \n                      key={i} \n                      className=\"w-4 flex justify-center relative\"\n                    >\n                      <div className=\"border-l border-gray-300 h-full absolute top-0 bottom-0\"></div>\n                    </div>\n                  ))}\n                </div>\n                {/* Branch line to the current item */}\n                <div className=\"w-3 h-0.5 bg-gray-300 flex-shrink-0 -ml-1.5\"></div>\n\n                <Image\n                  src=\"/file.svg\"\n                  alt=\"Document\"\n                  width={14}\n                  height={14}\n                  className=\"mr-2\"\n                />\n                <span className=\"text-xs\">{childFile.file.name}</span>\n                {childFile.file.size > 0 && (\n                  <span className=\"text-xs text-gray-500 ml-2\">\n                    {(childFile.file.size / 1024).toFixed(0)} KB\n                  </span>\n                )}\n                <button\n                  onClick={() => removeFile(index)}\n                  className=\"ml-auto text-xs text-gray-500 hover:text-red-600\"\n                  aria-label=\"Remove file\"\n                  disabled={isProcessing}\n                >\n                  ✕\n                </button>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function UploadFile() {\n  const [uploadedFiles, setUploadedFiles] = useState<TempFileData[]>([]);\n  const [extractionProgress, setExtractionProgress] =\n    useState<ExtractionProgress>({\n      processing: false,\n      message: \"\",\n    });\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // This effect will clean up file URLs when component unmounts or page refreshes\n  useEffect(() => {\n    return () => {\n      // Revoke all object URLs to prevent memory leaks\n      uploadedFiles.forEach((fileData) => {\n        URL.revokeObjectURL(fileData.url);\n      });\n    };\n  }, [uploadedFiles]);\n\n  // Removes a single file\n  const removeFile = (index: number) => {\n    setUploadedFiles((prev) => {\n      // Revoke the URL to prevent memory leaks\n      URL.revokeObjectURL(prev[index].url);\n      // Remove the file from the array\n      return prev.filter((_, i) => i !== index);\n    });\n  };\n\n  // Clears all files\n  const clearAllFiles = () => {\n    // Revoke all URLs to prevent memory leaks\n    uploadedFiles.forEach((fileData) => {\n      URL.revokeObjectURL(fileData.url);\n    });\n    setUploadedFiles([]);\n  };\n\n  // Generate a unique ID for files\n  const generateFileId = (file: File, parent?: string): string => {\n    return `file-${Date.now()}-${Math.random().toString(36).slice(2)}-${\n      file.name\n    }`;\n  };\n\n  // Processes files, extracting zip files as needed\n  const processFiles = async (files: File[]) => {\n    setExtractionProgress({ processing: true, message: \"Processing files...\" });\n\n    const tempFiles: TempFileData[] = [];\n\n    for (const file of files) {\n      // Check if it's a zip file\n      if (file.name.toLowerCase().endsWith(\".zip\")) {\n        await extractZipFile(file, tempFiles);\n      } else {\n        // Regular file\n        tempFiles.push({\n          id: generateFileId(file),\n          file,\n          url: URL.createObjectURL(file),\n        });\n      }\n    }\n\n    setExtractionProgress({ processing: false, message: \"\" });\n    setUploadedFiles((prev) => [...prev, ...tempFiles]);\n  };\n\n  // Recursive function to extract zip files, including nested ones\n  const extractZipFile = async (\n    zipFile: File,\n    tempFiles: TempFileData[],\n    parentName?: string\n  ) => {\n    try {\n      setExtractionProgress({\n        processing: true,\n        message: `Extracting ${zipFile.name}${\n          parentName ? ` from ${parentName}` : \"\"\n        }...`,\n      });\n\n      // Read the zip file\n      const zipData = await JSZip.loadAsync(await zipFile.arrayBuffer());\n\n      // Track folders to create hierarchical structure\n      const folders: Record<string, boolean> = {};\n\n      // First pass: identify all directories\n      Object.keys(zipData.files).forEach((filename) => {\n        const parts = filename.split(\"/\");\n        // Remove the last part (file or empty string for directories)\n        parts.pop();\n\n        // Register all parent folders\n        let path = \"\";\n        for (const part of parts) {\n          path = path ? `${path}/${part}` : part;\n          folders[path] = true;\n        }\n      });\n\n      // Add the zip file itself so we can display it as the root\n      tempFiles.push({\n        id: generateFileId(zipFile, parentName),\n        file: zipFile,\n        url: URL.createObjectURL(zipFile),\n        isExtracted: false,\n        parent: parentName,\n      });\n      \n      // Create folder entries for all directories\n      for (const folderPath of Object.keys(folders)) {\n        // Get the name of this folder (last part of the path)\n        const pathParts = folderPath.split('/');\n        const folderName = pathParts[pathParts.length - 1];\n        \n        // Determine the parent path\n        const parentPath = pathParts.length > 1 \n          ? `${zipFile.name}/${pathParts.slice(0, -1).join('/')}` \n          : zipFile.name;\n        \n        // Create a File object for this folder\n        const folderFile = new File([], folderName, { type: 'folder' });\n        \n        // Add the folder to tempFiles\n        tempFiles.push({\n          id: generateFileId(folderFile, `${parentPath}/${folderName}`),\n          file: folderFile,\n          url: '',\n          isExtracted: true,\n          parent: parentPath,\n        });\n      }\n\n      // Process each file in the zip\n      for (const [filename, zipEntry] of Object.entries(zipData.files)) {\n        // Skip directories\n        if (zipEntry.dir) continue;\n\n        const pathParts = filename.split(\"/\");\n        const actualFileName = pathParts.pop() || filename;\n        const folderPath = pathParts.join(\"/\");\n\n        // Get the file data\n        const content = await zipEntry.async(\"blob\");\n\n        // Create a File object from the extracted content\n        const extractedFile = new File([content], actualFileName, {\n          type: content.type || \"application/octet-stream\",\n        });\n\n        // Full path for displaying in UI\n        const displayPath = folderPath\n          ? `${zipFile.name}/${folderPath}`\n          : zipFile.name;\n\n        // Check if this is a nested zip file\n        if (actualFileName.toLowerCase().endsWith(\".zip\")) {\n          // Process nested zip file\n          await extractZipFile(extractedFile, tempFiles, displayPath);\n        } else {\n          // Regular file from zip\n          tempFiles.push({\n            id: generateFileId(extractedFile, displayPath),\n            file: extractedFile,\n            url: URL.createObjectURL(extractedFile),\n            isExtracted: true,\n            parent: displayPath,\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\"Error extracting zip file:\", error);\n      setExtractionProgress({\n        processing: false,\n        message: `Error extracting ${zipFile.name}: ${\n          error instanceof Error ? error.message : String(error)\n        }`,\n      });\n\n      // Add the zip file itself if extraction fails\n      tempFiles.push({\n        id: generateFileId(zipFile),\n        file: zipFile,\n        url: URL.createObjectURL(zipFile),\n      });\n    }\n  };\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const selectedFiles = Array.from(e.target.files);\n      await processFiles(selectedFiles);\n    }\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n  };\n\n  const handleDrop = async (e: React.DragEvent) => {\n    e.preventDefault();\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      const droppedFiles = Array.from(e.dataTransfer.files);\n      await processFiles(droppedFiles);\n    }\n  };\n\n  const handleClick = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-4\">\n      <div\n        className={`border-2 border-dashed border-gray-300 rounded-lg p-8 text-center ${\n          !extractionProgress.processing\n            ? \"cursor-pointer hover:bg-gray-50 transition-colors\"\n            : \"\"\n        }`}\n        onDragOver={\n          !extractionProgress.processing\n            ? handleDragOver\n            : (e) => e.preventDefault()\n        }\n        onDrop={\n          !extractionProgress.processing\n            ? handleDrop\n            : (e) => e.preventDefault()\n        }\n        onClick={!extractionProgress.processing ? handleClick : undefined}\n      >\n        {extractionProgress.processing ? (\n          <div className=\"animate-pulse\">\n            <div className=\"h-12 w-12 border-t-2 border-b-2 border-blue-500 rounded-full animate-spin mx-auto mb-4\"></div>\n            <h3 className=\"text-lg font-medium text-gray-700\">\n              {extractionProgress.message}\n            </h3>\n            <p className=\"text-sm text-gray-500 mt-1\">\n              Please wait while we process your files...\n            </p>\n          </div>\n        ) : (\n          <>\n            <Image\n              src=\"/file.svg\"\n              alt=\"Upload\"\n              width={48}\n              height={48}\n              className=\"mx-auto mb-4\"\n            />\n            <h3 className=\"text-lg font-medium text-gray-700\">\n              Upload Documents\n            </h3>\n            <p className=\"text-sm text-gray-500 mt-1\">\n              Drag & drop files here or click to browse\n            </p>\n            <p className=\"text-xs text-gray-500 mt-2\">\n              Zip files will be automatically extracted (including nested zip\n              files)\n            </p>\n          </>\n        )}\n        <input\n          type=\"file\"\n          ref={fileInputRef}\n          onChange={handleFileChange}\n          className=\"hidden\"\n          multiple\n          accept=\".pdf,.doc,.docx,.txt,.zip\"\n          disabled={extractionProgress.processing}\n        />\n      </div>\n\n      {uploadedFiles.length > 0 && (\n        <div className=\"mt-6\">\n          <div className=\"flex justify-between items-center mb-3\">\n            <h4 className=\"text-md font-medium text-gray-700\">\n              Uploaded Documents ({uploadedFiles.length})\n            </h4>\n            <button\n              onClick={clearAllFiles}\n              className=\"text-sm text-red-600 hover:text-red-800\"\n              disabled={extractionProgress.processing}\n            >\n              Clear All\n            </button>\n          </div>\n\n          {/* Display files in a hierarchical structure */}\n          <div className=\"border rounded-lg divide-y\">\n            {/* First show root files (no parent) */}\n            {uploadedFiles\n              .filter((f) => !f.parent)\n              .map((fileData, index) => (\n                <FileTreeItem\n                  key={`file-${index}`}\n                  fileData={fileData}\n                  allFiles={uploadedFiles}\n                  onRemove={() => removeFile(index)}\n                  isProcessing={extractionProgress.processing}\n                  removeFile={removeFile}\n                  level={0}\n                />\n              ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AA+BA,SAAS,aAAa,EACpB,QAAQ,EACR,QAAQ,EACR,QAAQ,EACR,YAAY,EACZ,UAAU,EACV,KAAK,EACa;IAClB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,QAAQ,SAAS,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;IACxD,MAAM,WAAW,SAAS,IAAI,CAAC,IAAI,KAAK,YAAY,SAAS,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;IAEhF,4EAA4E;IAC5E,MAAM,aAAa,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,SAAS,IAAI,CAAC,IAAI,IAEtE,EAAE,MAAM,IAAI,EAAE,MAAM,KAAK,GAAG,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,IAAI,CAAC,IAAI,EAAE;IAEtE,4BAA4B;IAC5B,MAAM,cAAc,WAAW,MAAM,GAAG;IAExC,qBACE,8OAAC;;0BACC,8OAAC;gBAAI,WAAW,CAAC,sBAAsB,EAAE,QAAQ,IAAI,eAAe,IAAI;;oBAErE,QAAQ,mBACP,8OAAC;wBAAI,WAAU;kCACZ,MAAM,IAAI,CAAC;4BAAE,QAAQ;wBAAM,GAAG,GAAG,CAAC,CAAC,GAAG,kBACrC,8OAAC;gCAEC,WAAU;0CAEV,cAAA,8OAAC;oCAAI,WAAU;;;;;;+BAHV;;;;;;;;;;oBAUZ,QAAQ,mBACP,8OAAC;wBAAI,WAAU;;;;;;oBAIhB,6BACC,8OAAC;wBACC,SAAS,IAAM,YAAY,CAAC;wBAC5B,WAAU;wBACV,cAAY,WAAW,aAAa;wBACpC,UAAU;kCAET,WAAW,MAAM;;;;;;oBAKrB,CAAC,6BAAe,8OAAC;wBAAI,WAAU;;;;;;kCAGhC,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAK,WAAW,cAAc,QAAQ,cAAc;wBACpD,KAAK,WAAW,WAAW,QAAQ,gBAAgB;wBACnD,OAAO,YAAY,QAAQ,KAAK;wBAChC,QAAQ,YAAY,QAAQ,KAAK;wBACjC,WAAU;;;;;;kCAIZ,8OAAC;wBAAK,WAAW,CAAC,QAAQ,EAAE,SAAS,WAAW,gBAAgB,GAAG,CAAC,EAAE,WAAW,kBAAkB,IAAI;;4BACpG,SAAS,IAAI,CAAC,IAAI;4BAAE,YAAY,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,MAAM;;;;;;;oBAI5E,SAAS,IAAI,CAAC,IAAI,GAAG,mBACpB,8OAAC;wBAAK,WAAU;;4BACb,CAAC,SAAS,IAAI,CAAC,IAAI,GAAG,IAAI,EAAE,OAAO,CAAC;4BAAG;;;;;;;oBAK3C,0BACC,8OAAC;wBAAK,WAAU;kCAA6B;;;;;;kCAM/C,8OAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;wBACX,UAAU;kCACX;;;;;;;;;;;;YAMF,YAAY,6BACX,8OAAC;gBAAI,WAAU;0BAEZ,WAAW,GAAG,CAAC,CAAC,WAAW;oBAC1B,MAAM,QAAQ,SAAS,SAAS,CAC9B,CAAC,IAAM,EAAE,EAAE,KAAK,UAAU,EAAE;oBAG9B,sDAAsD;oBACtD,IAAI,UAAU,IAAI,CAAC,IAAI,KAAK,YAAY,UAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM;wBACzE,qBACE,8OAAC;4BAEC,UAAU;4BACV,UAAU;4BACV,UAAU,IAAM,WAAW;4BAC3B,cAAc;4BACd,YAAY;4BACZ,OAAO,QAAQ;2BANV,CAAC,aAAa,EAAE,YAAY;;;;;oBASvC;oBAEA,oBAAoB;oBACpB,qBACE,8OAAC;wBAEC,WAAU;;0CAGV,8OAAC;gCAAI,WAAU;0CACZ,MAAM,IAAI,CAAC;oCAAE,QAAQ,QAAQ;gCAAE,GAAG,GAAG,CAAC,CAAC,GAAG,kBACzC,8OAAC;wCAEC,WAAU;kDAEV,cAAA,8OAAC;4CAAI,WAAU;;;;;;uCAHV;;;;;;;;;;0CAQX,8OAAC;gCAAI,WAAU;;;;;;0CAEf,8OAAC,6HAAA,CAAA,UAAK;gCACJ,KAAI;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;0CAEZ,8OAAC;gCAAK,WAAU;0CAAW,UAAU,IAAI,CAAC,IAAI;;;;;;4BAC7C,UAAU,IAAI,CAAC,IAAI,GAAG,mBACrB,8OAAC;gCAAK,WAAU;;oCACb,CAAC,UAAU,IAAI,CAAC,IAAI,GAAG,IAAI,EAAE,OAAO,CAAC;oCAAG;;;;;;;0CAG7C,8OAAC;gCACC,SAAS,IAAM,WAAW;gCAC1B,WAAU;gCACV,cAAW;gCACX,UAAU;0CACX;;;;;;;uBAnCI,CAAC,MAAM,EAAE,YAAY;;;;;gBAwChC;;;;;;;;;;;;AAKV;AAEe,SAAS;IACtB,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB,EAAE;IACrE,MAAM,CAAC,oBAAoB,sBAAsB,GAC/C,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAsB;QAC3B,YAAY;QACZ,SAAS;IACX;IACF,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAoB;IAE9C,gFAAgF;IAChF,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,OAAO;YACL,iDAAiD;YACjD,cAAc,OAAO,CAAC,CAAC;gBACrB,IAAI,eAAe,CAAC,SAAS,GAAG;YAClC;QACF;IACF,GAAG;QAAC;KAAc;IAElB,wBAAwB;IACxB,MAAM,aAAa,CAAC;QAClB,iBAAiB,CAAC;YAChB,yCAAyC;YACzC,IAAI,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG;YACnC,iCAAiC;YACjC,OAAO,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;QACrC;IACF;IAEA,mBAAmB;IACnB,MAAM,gBAAgB;QACpB,0CAA0C;QAC1C,cAAc,OAAO,CAAC,CAAC;YACrB,IAAI,eAAe,CAAC,SAAS,GAAG;QAClC;QACA,iBAAiB,EAAE;IACrB;IAEA,iCAAiC;IACjC,MAAM,iBAAiB,CAAC,MAAY;QAClC,OAAO,CAAC,KAAK,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,EAChE,KAAK,IAAI,EACT;IACJ;IAEA,kDAAkD;IAClD,MAAM,eAAe,OAAO;QAC1B,sBAAsB;YAAE,YAAY;YAAM,SAAS;QAAsB;QAEzE,MAAM,YAA4B,EAAE;QAEpC,KAAK,MAAM,QAAQ,MAAO;YACxB,2BAA2B;YAC3B,IAAI,KAAK,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,SAAS;gBAC5C,MAAM,eAAe,MAAM;YAC7B,OAAO;gBACL,eAAe;gBACf,UAAU,IAAI,CAAC;oBACb,IAAI,eAAe;oBACnB;oBACA,KAAK,IAAI,eAAe,CAAC;gBAC3B;YACF;QACF;QAEA,sBAAsB;YAAE,YAAY;YAAO,SAAS;QAAG;QACvD,iBAAiB,CAAC,OAAS;mBAAI;mBAAS;aAAU;IACpD;IAEA,iEAAiE;IACjE,MAAM,iBAAiB,OACrB,SACA,WACA;QAEA,IAAI;YACF,sBAAsB;gBACpB,YAAY;gBACZ,SAAS,CAAC,WAAW,EAAE,QAAQ,IAAI,GACjC,aAAa,CAAC,MAAM,EAAE,YAAY,GAAG,GACtC,GAAG,CAAC;YACP;YAEA,oBAAoB;YACpB,MAAM,UAAU,MAAM,qIAAA,CAAA,UAAK,CAAC,SAAS,CAAC,MAAM,QAAQ,WAAW;YAE/D,iDAAiD;YACjD,MAAM,UAAmC,CAAC;YAE1C,uCAAuC;YACvC,OAAO,IAAI,CAAC,QAAQ,KAAK,EAAE,OAAO,CAAC,CAAC;gBAClC,MAAM,QAAQ,SAAS,KAAK,CAAC;gBAC7B,8DAA8D;gBAC9D,MAAM,GAAG;gBAET,8BAA8B;gBAC9B,IAAI,OAAO;gBACX,KAAK,MAAM,QAAQ,MAAO;oBACxB,OAAO,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,GAAG;oBAClC,OAAO,CAAC,KAAK,GAAG;gBAClB;YACF;YAEA,2DAA2D;YAC3D,UAAU,IAAI,CAAC;gBACb,IAAI,eAAe,SAAS;gBAC5B,MAAM;gBACN,KAAK,IAAI,eAAe,CAAC;gBACzB,aAAa;gBACb,QAAQ;YACV;YAEA,4CAA4C;YAC5C,KAAK,MAAM,cAAc,OAAO,IAAI,CAAC,SAAU;gBAC7C,sDAAsD;gBACtD,MAAM,YAAY,WAAW,KAAK,CAAC;gBACnC,MAAM,aAAa,SAAS,CAAC,UAAU,MAAM,GAAG,EAAE;gBAElD,4BAA4B;gBAC5B,MAAM,aAAa,UAAU,MAAM,GAAG,IAClC,GAAG,QAAQ,IAAI,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,GACrD,QAAQ,IAAI;gBAEhB,uCAAuC;gBACvC,MAAM,aAAa,IAAI,KAAK,EAAE,EAAE,YAAY;oBAAE,MAAM;gBAAS;gBAE7D,8BAA8B;gBAC9B,UAAU,IAAI,CAAC;oBACb,IAAI,eAAe,YAAY,GAAG,WAAW,CAAC,EAAE,YAAY;oBAC5D,MAAM;oBACN,KAAK;oBACL,aAAa;oBACb,QAAQ;gBACV;YACF;YAEA,+BAA+B;YAC/B,KAAK,MAAM,CAAC,UAAU,SAAS,IAAI,OAAO,OAAO,CAAC,QAAQ,KAAK,EAAG;gBAChE,mBAAmB;gBACnB,IAAI,SAAS,GAAG,EAAE;gBAElB,MAAM,YAAY,SAAS,KAAK,CAAC;gBACjC,MAAM,iBAAiB,UAAU,GAAG,MAAM;gBAC1C,MAAM,aAAa,UAAU,IAAI,CAAC;gBAElC,oBAAoB;gBACpB,MAAM,UAAU,MAAM,SAAS,KAAK,CAAC;gBAErC,kDAAkD;gBAClD,MAAM,gBAAgB,IAAI,KAAK;oBAAC;iBAAQ,EAAE,gBAAgB;oBACxD,MAAM,QAAQ,IAAI,IAAI;gBACxB;gBAEA,iCAAiC;gBACjC,MAAM,cAAc,aAChB,GAAG,QAAQ,IAAI,CAAC,CAAC,EAAE,YAAY,GAC/B,QAAQ,IAAI;gBAEhB,qCAAqC;gBACrC,IAAI,eAAe,WAAW,GAAG,QAAQ,CAAC,SAAS;oBACjD,0BAA0B;oBAC1B,MAAM,eAAe,eAAe,WAAW;gBACjD,OAAO;oBACL,wBAAwB;oBACxB,UAAU,IAAI,CAAC;wBACb,IAAI,eAAe,eAAe;wBAClC,MAAM;wBACN,KAAK,IAAI,eAAe,CAAC;wBACzB,aAAa;wBACb,QAAQ;oBACV;gBACF;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,sBAAsB;gBACpB,YAAY;gBACZ,SAAS,CAAC,iBAAiB,EAAE,QAAQ,IAAI,CAAC,EAAE,EAC1C,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO,QAChD;YACJ;YAEA,8CAA8C;YAC9C,UAAU,IAAI,CAAC;gBACb,IAAI,eAAe;gBACnB,MAAM;gBACN,KAAK,IAAI,eAAe,CAAC;YAC3B;QACF;IACF;IAEA,MAAM,mBAAmB,OAAO;QAC9B,IAAI,EAAE,MAAM,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG;YAC/C,MAAM,gBAAgB,MAAM,IAAI,CAAC,EAAE,MAAM,CAAC,KAAK;YAC/C,MAAM,aAAa;QACrB;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,EAAE,cAAc;IAClB;IAEA,MAAM,aAAa,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,EAAE,YAAY,CAAC,KAAK,IAAI,EAAE,YAAY,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG;YAC3D,MAAM,eAAe,MAAM,IAAI,CAAC,EAAE,YAAY,CAAC,KAAK;YACpD,MAAM,aAAa;QACrB;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,aAAa,OAAO,EAAE;YACxB,aAAa,OAAO,CAAC,KAAK;QAC5B;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,WAAW,CAAC,kEAAkE,EAC5E,CAAC,mBAAmB,UAAU,GAC1B,sDACA,IACJ;gBACF,YACE,CAAC,mBAAmB,UAAU,GAC1B,iBACA,CAAC,IAAM,EAAE,cAAc;gBAE7B,QACE,CAAC,mBAAmB,UAAU,GAC1B,aACA,CAAC,IAAM,EAAE,cAAc;gBAE7B,SAAS,CAAC,mBAAmB,UAAU,GAAG,cAAc;;oBAEvD,mBAAmB,UAAU,iBAC5B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAG,WAAU;0CACX,mBAAmB,OAAO;;;;;;0CAE7B,8OAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;6CAK5C;;0CACE,8OAAC,6HAAA,CAAA,UAAK;gCACJ,KAAI;gCACJ,KAAI;gCACJ,OAAO;gCACP,QAAQ;gCACR,WAAU;;;;;;0CAEZ,8OAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAGlD,8OAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAG1C,8OAAC;gCAAE,WAAU;0CAA6B;;;;;;;;kCAM9C,8OAAC;wBACC,MAAK;wBACL,KAAK;wBACL,UAAU;wBACV,WAAU;wBACV,QAAQ;wBACR,QAAO;wBACP,UAAU,mBAAmB,UAAU;;;;;;;;;;;;YAI1C,cAAc,MAAM,GAAG,mBACtB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;oCAAoC;oCAC3B,cAAc,MAAM;oCAAC;;;;;;;0CAE5C,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,UAAU,mBAAmB,UAAU;0CACxC;;;;;;;;;;;;kCAMH,8OAAC;wBAAI,WAAU;kCAEZ,cACE,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,MAAM,EACvB,GAAG,CAAC,CAAC,UAAU,sBACd,8OAAC;gCAEC,UAAU;gCACV,UAAU;gCACV,UAAU,IAAM,WAAW;gCAC3B,cAAc,mBAAmB,UAAU;gCAC3C,YAAY;gCACZ,OAAO;+BANF,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;AActC","debugId":null}}]
}