{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/chriskinsman/Documents/GitHub/agentsifyai/document-processor-next/app/components/uploadFile.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport Image from \"next/image\";\nimport JSZip from \"jszip\";\n\n// Type for our file data that includes the URL\ninterface TempFileData {\n  file: File;\n  url: string;\n  isExtracted?: boolean;\n  parent?: string; // To track nested files\n}\n\n// Type for tracking zip extraction progress\ninterface ExtractionProgress {\n  processing: boolean;\n  message: string;\n}\n\nexport default function UploadFile() {\n  const [uploadedFiles, setUploadedFiles] = useState<TempFileData[]>([]);\n  const [extractionProgress, setExtractionProgress] = useState<ExtractionProgress>({\n    processing: false,\n    message: \"\",\n  });\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // This effect will clean up file URLs when component unmounts or page refreshes\n  useEffect(() => {\n    return () => {\n      // Revoke all object URLs to prevent memory leaks\n      uploadedFiles.forEach(fileData => {\n        URL.revokeObjectURL(fileData.url);\n      });\n    };\n  }, [uploadedFiles]);\n  \n  // Removes a single file\n  const removeFile = (index: number) => {\n    setUploadedFiles(prev => {\n      // Revoke the URL to prevent memory leaks\n      URL.revokeObjectURL(prev[index].url);\n      // Remove the file from the array\n      return prev.filter((_, i) => i !== index);\n    });\n  };\n  \n  // Clears all files\n  const clearAllFiles = () => {\n    // Revoke all URLs to prevent memory leaks\n    uploadedFiles.forEach(fileData => {\n      URL.revokeObjectURL(fileData.url);\n    });\n    setUploadedFiles([]);\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const newFiles = Array.from(e.target.files).map(file => ({\n        file,\n        url: URL.createObjectURL(file) // Create temporary URL for each file\n      }));\n      setUploadedFiles(prev => [...prev, ...newFiles]);\n    }\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      const newFiles = Array.from(e.dataTransfer.files).map(file => ({\n        file,\n        url: URL.createObjectURL(file) // Create temporary URL for each file\n      }));\n      setUploadedFiles(prev => [...prev, ...newFiles]);\n    }\n  };\n\n  const handleClick = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-4\">\n      <div \n        className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:bg-gray-50 transition-colors\"\n        onDragOver={handleDragOver}\n        onDrop={handleDrop}\n        onClick={handleClick}\n      >\n        <Image src=\"/file.svg\" alt=\"Upload\" width={48} height={48} className=\"mx-auto mb-4\" />\n        <h3 className=\"text-lg font-medium text-gray-700\">Upload Documents</h3>\n        <p className=\"text-sm text-gray-500 mt-1\">\n          Drag & drop files here or click to browse\n        </p>\n        <input \n          type=\"file\" \n          ref={fileInputRef} \n          onChange={handleFileChange} \n          className=\"hidden\" \n          multiple\n          accept=\".pdf,.doc,.docx,.txt\"\n        />\n      </div>\n\n      {uploadedFiles.length > 0 && (\n        <div className=\"mt-6\">\n          <div className=\"flex justify-between items-center mb-3\">\n            <h4 className=\"text-md font-medium text-gray-700\">Uploaded Documents</h4>\n            <button \n              onClick={clearAllFiles}\n              className=\"text-sm text-red-600 hover:text-red-800\"\n            >\n              Clear All\n            </button>\n          </div>\n          <ul className=\"border rounded-lg divide-y\">\n            {uploadedFiles.map((fileData, index) => (\n              <li key={index} className=\"p-3 flex items-center\">\n                <Image src=\"/file.svg\" alt=\"Document\" width={20} height={20} className=\"mr-2\" />\n                <span className=\"text-sm\">{fileData.file.name}</span>\n                <span className=\"text-xs text-gray-500 ml-2\">\n                  {(fileData.file.size / 1024).toFixed(0)} KB\n                </span>\n                <button \n                  onClick={() => removeFile(index)}\n                  className=\"ml-auto text-sm text-gray-500 hover:text-red-600\"\n                  aria-label=\"Remove file\"\n                >\n                  âœ•\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}